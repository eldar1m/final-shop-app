{% assign gender = '' %}
{% for tag in product.tags %}
  {% if tag contains 'gender:men' %}
    {% assign gender = 'For Men' %}
  {% elsif tag contains 'gender:women' %}
    {% assign gender = 'For Women' %}
  {% endif %}
{% endfor %}

<div class="product-page">
  <div class="product-gallery">
    {% for image in product.images %}
      <div class="product-gallery-item">
        <img src="{{ image.src | img_url: 'large' }}" alt="{{ image.alt | escape }}">
      </div>
    {% endfor %}
  </div>

  <div class="product-page-product-info">
    <div class="product-breadcrumb">
      {% if gender != '' %}
        <span class="path-item">{{ gender }}</span> /
      {% endif %}
      <span class="path-item">{{ product.vendor }}</span> /
      <span class="path-item">{{ product.title }}</span>
    </div>

    <div class="product-page-product-title">
      {{ product.vendor }}
      {{ product.title }}
    </div>

    <div class="product-page-product-price">
      {{ product.price | money }}
    </div>

    <form method="post" action="/cart/add">
      <div class="product-page-product-variants">
        {% for variant in product.variants %}
          <label class="variant-button {% if variant.available == false %}disabled{% endif %}">
            <label class="size-option">
              <input
                type="radio"
                name="size"
                value="{{ variant.title }}"
                {% unless variant.available %}
                  disabled
                {% endunless %}
              >
              <span>{{ variant.title }}</span>
            </label>
          </label>
        {% endfor %}
      </div>

      <div class="product-actions">
        <button
          type="submit"
          class="product-page-add-to-cart"
          {% unless product.available %}
            disabled
          {% endunless %}
        >
          Add to cart
        </button>
        <button type="button" class="product-page-add-to-wishlist">Add to wishlist</button>
      </div>
    </form>

    <div class="product-page-product-description">
      <div class="product-attribute-selector">
        <select id="attribute-select">
          <option value="description">Description</option>
          <option value="reviews">Reviews</option>
        </select>
        <div class="select-icon-down">
          {% render 'icon-chevron-down' %}
        </div>
      </div>

      <div class="product-attribute-content">
        <div id="description-content" class="attribute-content active">
          {{ product.description }}
        </div>

        <div id="reviews-content" class="attribute-content">reviews</div>
      </div>
    </div>
  </div>
</div>

{% section 'products-section' %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const select = document.getElementById('attribute-select');
    const contents = document.querySelectorAll('.attribute-content');

    select.addEventListener('change', function () {
      contents.forEach((content) => content.classList.remove('active'));
      const selected = document.getElementById(`${this.value}-content`);
      if (selected) selected.classList.add('active');
    });
  });
</script>
